package com.trkj.system.salary_management.mapper;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.core.toolkit.Constants;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;

import com.trkj.system.salary_management.mapper.entity.StaffSalary;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;

import java.util.List;

@Mapper
public interface StaffSalaryMapper extends BaseMapper<StaffSalary> {
    @Select("select s.STAFF_STATE as zt, fe.FIXEDWAGE_OFFICIALMONEY+ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO-ina.INS_ARCHIVE_SOCIAL_PERSON_PAY as yfgz,fe.FIXEDWAGE_OFFICIALMONEY-ina.INS_ARCHIVE_SOCIAL_PERSON_PAY-ina.INS_ARCHIVE_FUND_PERSON_PAY+ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO-att.ATTENDANDCE_LITEMONEY*ch.LATE_TIMES-att.ATTENDANDCE_LEAVEMONEY*ch.EARLY_LEAVE-att.ATTENDANDCE_ABSCNTMONEY*ch.ABSENTEEISM- att.ATTENDANDCE_LEAVEMONEY*ch.NUMBEROF_LEAVE as sfgz, d.DEPT_NAME as DEPT_NAME, ina.INS_ARCHIVE_SOCIAL_PERSON_PAY as grsb,ina.INS_ARCHIVE_SOCIAL_FIRM_PAY as gssb,ina.INS_ARCHIVE_FUND_PERSON_PAY as grgjj, ina. INS_ARCHIVE_FUND_FIRM_PAY as gsgjj,s.STAFF_NAME as STAFF_NAME,s.STAFF_ID as STAFF_ID,dp.POST_NAME as POST_NAME,fe.FIXEDWAGE_PERIODMONEY as FIXEDWAGE_PERIODMONEY,fe.FIXEDWAGE_OFFICIALMONEY as FIXEDWAGE_OFFICIALMONEY,ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO as jiabanmoney,att.ATTENDANDCE_LITEMONEY*ch.LATE_TIMES as chidaomony, att.ATTENDANDCE_LEAVEMONEY*ch.EARLY_LEAVE as zaotueimoney, att.ATTENDANDCE_ABSCNTMONEY*ch.ABSENTEEISM   as kuangonmoney ,  att.ATTENDANDCE_LEAVEMONEY*ch.NUMBEROF_LEAVE as qinjiamoney from STAFFWAG sw left JOIN STAFF s on sw.STAFF_ID=s.STAFF_ID left JOIN DEPT d on s.DEPT_ID=d.DEPT_ID   LEFT JOIN DEPT_POST dp on s.DEPT_POST_ID=dp.DEPT_POST_ID LEFT JOIN  FIXEDWAGE fe on sw.STAFF_ID=fe.STAFF_ID  LEFT JOIN ATTENDANDCE att on d.DEPT_ID= att.DEPT_ID LEFT JOIN CHECKFILES ch on ch.STAFF_Name=s.STAFF_Name LEFT JOIN BUSINESS bu on bu.DEPT_ID=d.DEPT_Id  LEFT JOIN TRAVEL tr on  sw.STAFF_ID= tr.STAFF_ID LEFT JOIN WORKSCHEME wo on  d.DEPT_id= wo.DEPT_ID  LEFT JOIN INSURED_PAYMENT ins on sw.STAFF_ID=ins.STAFF_ID  LEFT JOIN  INSURED_DETAIL ind on ind.INS_DETAIL_ID=ins.INS_DETAIL_ID    LEFT JOIN INSURED_ARCHIVE ina on s.STAFF_NAME=ina.INS_ARCHIVE_STAFF_NAME  WHERE sw.CREATED_TIME>=TRUNC(SYSDATE, 'MM') AND sw.CREATED_TIME<=LAST_DAY(SYSDATE)  ${ew.customSqlSegment}")
     IPage<StaffSalary> selectPaer(Page<StaffSalary> staffSalary,@Param(Constants.WRAPPER) QueryWrapper<StaffSalary> queryWrapper);
@Select("select s.STAFF_STATE as zt,ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO as jiabanmoney,att.ATTENDANDCE_LITEMONEY*ch.LATE_TIMES as chidaomony, att.ATTENDANDCE_LEAVEMONEY*ch.EARLY_LEAVE as zaotueimoney, att.ATTENDANDCE_ABSCNTMONEY*ch.ABSENTEEISM   as kuangonmoney , att.ATTENDANDCE_LEAVEMONEY*ch.NUMBEROF_LEAVE as qinjiamoney, fe.FIXEDWAGE_OFFICIALMONEY+ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO-ina.INS_ARCHIVE_SOCIAL_PERSON_PAY as yfgz,fe.FIXEDWAGE_OFFICIALMONEY-ina.INS_ARCHIVE_SOCIAL_PERSON_PAY-ina.INS_ARCHIVE_FUND_PERSON_PAY+ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO-att.ATTENDANDCE_LITEMONEY*ch.LATE_TIMES-att.ATTENDANDCE_LEAVEMONEY*ch.EARLY_LEAVE-att.ATTENDANDCE_ABSCNTMONEY*ch.ABSENTEEISM-att.ATTENDANDCE_LEAVEMONEY*ch.NUMBEROF_LEAVE as sfgz,fe.FIXEDWAGE_PERIODMONEY as FIXEDWAGE_PERIODMONEY,fe.FIXEDWAGE_OFFICIALMONEY as FIXEDWAGE_OFFICIALMONEY , ina.INS_ARCHIVE_SOCIAL_PERSON_PAY as grsb,ina.INS_ARCHIVE_SOCIAL_FIRM_PAY as gssb,ina.INS_ARCHIVE_FUND_PERSON_PAY as grgjj, ina. INS_ARCHIVE_FUND_FIRM_PAY as gsgjj from STAFFWAG sw left JOIN STAFF s on sw.STAFF_ID=s.STAFF_ID left JOIN DEPT d on s.DEPT_ID=d.DEPT_ID   LEFT JOIN DEPT_POST dp on s.DEPT_POST_ID=dp.DEPT_POST_ID LEFT JOIN  FIXEDWAGE fe on sw.STAFF_ID=fe.STAFF_ID  LEFT JOIN ATTENDANDCE att on d.DEPT_ID= att.DEPT_ID LEFT JOIN CHECKFILES ch on ch.STAFF_NAME=s.STAFF_NAME LEFT JOIN BUSINESS bu on bu.DEPT_ID=d.DEPT_Id  LEFT JOIN TRAVEL tr on  sw.STAFF_ID= tr.STAFF_ID LEFT JOIN WORKSCHEME wo on  d.DEPT_id= wo.DEPT_ID  LEFT JOIN INSURED_PAYMENT ins on sw.STAFF_ID=ins.STAFF_ID  LEFT JOIN  INSURED_DETAIL ind on ind.INS_DETAIL_ID=ins.INS_DETAIL_ID    LEFT JOIN INSURED_ARCHIVE ina on s.STAFF_NAME=ina.INS_ARCHIVE_STAFF_NAME  WHERE sw.CREATED_TIME>=TRUNC(SYSDATE, 'MM') AND sw.CREATED_TIME<=LAST_DAY(SYSDATE)")
     List<StaffSalary> selectList();
    //根据归档编号查询员工详细工资
    @Select("select s.STAFF_STATE as zt, fe.FIXEDWAGE_OFFICIALMONEY+ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO-ina.INS_ARCHIVE_SOCIAL_PERSON_PAY as yfgz,fe.FIXEDWAGE_OFFICIALMONEY-ina.INS_ARCHIVE_SOCIAL_PERSON_PAY-ina.INS_ARCHIVE_FUND_PERSON_PAY+ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO-att.ATTENDANDCE_LITEMONEY*ch.LATE_TIMES-att.ATTENDANDCE_LEAVEMONEY*ch.EARLY_LEAVE-att.ATTENDANDCE_ABSCNTMONEY*ch.ABSENTEEISM- att.att.ATTENDANDCE_LEAVEMONEY*ch.NUMBEROF_LEAVE as sfgz, d.DEPT_NAME as DEPT_NAME, ina.INS_ARCHIVE_SOCIAL_PERSON_PAY as grsb,ina.INS_ARCHIVE_SOCIAL_FIRM_PAY as gssb,ina.INS_ARCHIVE_FUND_PERSON_PAY as grgjj, ina. INS_ARCHIVE_FUND_FIRM_PAY as gsgjj,s.STAFF_NAME as STAFF_NAME,s.STAFF_ID as STAFF_ID,dp.POST_NAME as POST_NAME,fe.FIXEDWAGE_PERIODMONEY as FIXEDWAGE_PERIODMONEY,fe.FIXEDWAGE_OFFICIALMONEY as FIXEDWAGE_OFFICIALMONEY,ch.OVERTIME_HOURS*wo.WORKSCHEME_HOLIDAYRATIO as jiabanmoney,att.ATTENDANDCE_LITEMONEY*ch.LATE_TIMES as chidaomony, att.ATTENDANDCE_LEAVEMONEY*ch.EARLY_LEAVE as zaotueimoney, att.ATTENDANDCE_ABSCNTMONEY*ch.ABSENTEEISM   as kuangonmoney ,att.ATTENDANDCE_LEAVEMONEY*ch.NUMBEROF_LEAVE as qinjiamoney from STAFFWAG sw left JOIN STAFF s on sw.STAFF_ID=s.STAFF_ID left JOIN DEPT d on s.DEPT_ID=d.DEPT_ID   LEFT JOIN DEPT_POST dp on s.DEPT_POST_ID=dp.DEPT_POST_ID LEFT JOIN  FIXEDWAGE fe on sw.STAFF_ID=fe.STAFF_ID  LEFT JOIN ATTENDANDCE att on d.DEPT_ID= att.DEPT_ID LEFT JOIN CHECKFILES ch on ch.STAFF_NAME=s.STAFF_NAME LEFT JOIN BUSINESS bu on bu.DEPT_ID=d.DEPT_Id  LEFT JOIN TRAVEL tr on  sw.STAFF_ID= tr.STAFF_ID LEFT JOIN WORKSCHEME wo on  d.DEPT_id= wo.DEPT_ID  LEFT JOIN INSURED_PAYMENT ins on sw.STAFF_ID=ins.STAFF_ID  LEFT JOIN  INSURED_DETAIL ind on ind.INS_DETAIL_ID=ins.INS_DETAIL_ID    LEFT JOIN INSURED_ARCHIVE ina on s.STAFF_NAME=ina.INS_ARCHIVE_STAFF_NAME  Left JOIN  MONEYPIGEONHOLE mo on  mo.MONEYPIGEONHOLE_ID = sw.MONEYPIGEONHOLE_ID ${ew.customSqlSegment}")
   IPage<StaffSalary> selectPaer1(Page<StaffSalary> staffSalary, @Param(Constants.WRAPPER) QueryWrapper<StaffSalary> queryWrapper);
}


